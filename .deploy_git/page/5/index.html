<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="baidu-site-verification" content="nWXA5pz9OB&quot;"><meta name="google-site-verification" content="GV1JH1LWgxtYEzh1ZspR37dC-o6YZWuEfgCQLPnAAMM"><link rel="icon" href="/favicon.png"><link rel="alternate" type="application/rss+xml" title="Agreek的博客" href="https://978420544.github.io/atom.xml"><link rel="stylesheet" href="/styles.css"><link rel="stylesheet" href="/my.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><title>Agreek的博客</title></head><body><div class="container"><div class="columns page-header"><h1>Agreek的博客</h1></div><div class="columns"><div class="navigation"><nav class="menus-main"><a href="/" class="favicon"><img alt="Agreek的博客" src="/favicon.png"></a><a href="/">首页</a><a href="/archives">归档</a><a href="/resume">简历</a><a href="/about">关于</a></nav><nav class="right menus-right"><a href="/atom.xml">RSS</a><a target="_blank" href="https://github.com/978420544">fork on Github</a></nav></div></div><div class="columns"><div class="block-body column three-fourths"><div class="article-widget"><a href="https://github.com/978420544"></a></div><article><header><h2><a href="/2017/04/13/hexo源文件的远程托管解决方案/">hexo源文件的远程托管解决方案</a></h2></header><div class="article-meta clearfix"><time class="left">2017-04-13</time><ul class="tags left"><li><a href="/categories/hexo/">Hexo</a></li></ul><ul class="tags right"><li><a href="/tags/hexo/">Hexo</a></li></ul></div><div class="markdown-body"><p>最近，使用hexo的simpleblock主题时遇到一个问题，然后就去研究了一下。关于hexo博客Markdown文件的上传同时也可以上传相关的配置文件，用做源文件链接或者在其他的电脑上编辑博客。</p>
<p>解决方案：在git上面新建一个分支，在这个分支把所有的源文件和配置的文件上传，但是不能上传一些安装的目录和文件，然后在其他地方Clone下来，安装hexo使用，但是不能hexo init，init会把所有的文件初始化。</p>
<p>gitignore忽略文件：<br>.DS_Store<br>Thumbs.db<br>db.json<br>*.log<br>node_modules/</p>
</div></article><article><header><h2><a href="/2017/04/13/关于Spring定时任务的整理/">关于Spring定时任务的整理</a></h2></header><div class="article-meta clearfix"><time class="left">2017-04-13</time><ul class="tags left"><li><a href="/categories/spring/">Spring</a></li></ul><ul class="tags right"><li><a href="/tags/java/">Java</a></li><li><a href="/tags/spring/">Spring</a></li></ul></div><div class="markdown-body"><p>最近，在做多个第三方支付平台的接入时，发现许多平台的支付交易状态需要异步的去获取，这就需要一个定时任务去做这些交易状态查询接口的调用，然后碰到一系列定时任务的使用问题，因此就对这些定时任务做一些整理和总结。</p>
<h4 id="当前定时任务的三种产品"><a href="#当前定时任务的三种产品" class="headerlink" title="当前定时任务的三种产品"></a>当前定时任务的三种产品</h4><ul>
<li>Java自带的java.util.Timer类，这个类允许你调度一个java.util.TimerTask任务。使用这种方式可以让你的程序按照某一个频度执行，但不能在指定时间运行。一般用的较少，这篇文章将不做详细介绍。</li>
<li><a href="http://www.quartz-scheduler.org/" target="_blank" rel="noopener">Quartz</a>是一个完全由Java编写的开源作业调度框架，为在Java应用程序中进行作业调度提供了简单却强大的机制。Quartz允许开发人员根据时间间隔来调度作业。它实现了作业和触发器的多对多的关系，还能把多个作业与不同的触发器关联。</li>
<li>Spring3.0以后自带的task，可以将它看成一个轻量级的Quartz，而且使用起来比Quartz简单许多。</li>
</ul>
<h4 id="从作业类的继承方式来讲，可以分为两类："><a href="#从作业类的继承方式来讲，可以分为两类：" class="headerlink" title="从作业类的继承方式来讲，可以分为两类："></a>从作业类的继承方式来讲，可以分为两类：</h4><ul>
<li>作业类需要继承自特定的作业类基类，如Quartz中需要继承自org.springframework.scheduling.quartz.QuartzJobBean；java.util.Timer中需要继承自java.util.TimerTask。</li>
<li>作业类即普通的java类，不需要继承自任何基类</li>
</ul>
<h4 id="从任务调度的触发时机来分，这里主要是针对作业使用的触发器，主要有以下两种："><a href="#从任务调度的触发时机来分，这里主要是针对作业使用的触发器，主要有以下两种：" class="headerlink" title="从任务调度的触发时机来分，这里主要是针对作业使用的触发器，主要有以下两种："></a>从任务调度的触发时机来分，这里主要是针对作业使用的触发器，主要有以下两种：</h4><ul>
<li>每隔指定时间则触发一次，在Quartz中对应的触发器为：org.springframework.scheduling.quartz.SimpleTriggerBean</li>
<li>每到指定时间则触发一次，在Quartz中对应的调度器为：org.springframework.scheduling.quartz.CronTriggerBean</li>
</ul>
<h5 id="注：并非每种任务都可以使用这两种触发器，如java-util-TimerTask任务就只能使用第一种。Quartz和spring-task都可以支持这两种触发条件。"><a href="#注：并非每种任务都可以使用这两种触发器，如java-util-TimerTask任务就只能使用第一种。Quartz和spring-task都可以支持这两种触发条件。" class="headerlink" title="注：并非每种任务都可以使用这两种触发器，如java.util.TimerTask任务就只能使用第一种。Quartz和spring task都可以支持这两种触发条件。"></a>注：并非每种任务都可以使用这两种触发器，如java.util.TimerTask任务就只能使用第一种。Quartz和spring task都可以支持这两种触发条件。</h5><hr>
<h2 id="Quartz和SpringTask"><a href="#Quartz和SpringTask" class="headerlink" title="Quartz和SpringTask"></a>Quartz和SpringTask</h2><ul>
<li>Quartz的继承方式和非继承方式，SimpleTriggerBean触发器和CronTriggerBean触发器。</li>
<li>SpringTask的@Scheduled注解方式（cron,fixedRate,fixedDelay）。</li>
</ul>
<h3 id="Quartz"><a href="#Quartz" class="headerlink" title="Quartz"></a>Quartz</h3><h4 id="作业类继承自特定的基类-org-springframework-scheduling-quartz-QuartzJobBean"><a href="#作业类继承自特定的基类-org-springframework-scheduling-quartz-QuartzJobBean" class="headerlink" title="作业类继承自特定的基类:org.springframework.scheduling.quartz.QuartzJobBean"></a>作业类继承自特定的基类:org.springframework.scheduling.quartz.QuartzJobBean</h4><h5 id="作业类的继承（一）"><a href="#作业类的继承（一）" class="headerlink" title="作业类的继承（一）"></a>作业类的继承（一）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.quartz.JobExecutionContext;  </span><br><span class="line"><span class="keyword">import</span> org.quartz.JobExecutionException;  </span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.quartz.QuartzJobBean;  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Job1</span> <span class="keyword">extends</span> <span class="title">QuartzJobBean</span> </span>&#123;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> timeout;  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> i = <span class="number">0</span>;  </span><br><span class="line"><span class="comment">//调度工厂实例化后，经过timeout时间开始执行调度  </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTimeout</span><span class="params">(<span class="keyword">int</span> timeout)</span> </span>&#123;  </span><br><span class="line"><span class="keyword">this</span>.timeout = timeout;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">* 要调度的具体任务 </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">executeInternal</span><span class="params">(JobExecutionContext context)</span>  </span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> JobExecutionException </span>&#123;  </span><br><span class="line">  System.out.println(<span class="string">"定时任务执行中…"</span>);  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="配置作业类JobDetailBean（二）"><a href="#配置作业类JobDetailBean（二）" class="headerlink" title="配置作业类JobDetailBean（二）"></a>配置作业类JobDetailBean（二）</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"job1"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.JobDetailBean"</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobClass"</span> <span class="attr">value</span>=<span class="string">"com.gy.Job1"</span> /&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobDataAsMap"</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">map</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"timeout"</span> <span class="attr">value</span>=<span class="string">"0"</span> /&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">map</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="配置触发器（三）"><a href="#配置触发器（三）" class="headerlink" title="配置触发器（三）"></a>配置触发器（三）</h5><ul>
<li>SimpleTriggerBean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"simpleTrigger"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.SimpleTriggerBean"</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobDetail"</span> <span class="attr">ref</span>=<span class="string">"job1"</span> /&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"startDelay"</span> <span class="attr">value</span>=<span class="string">"0"</span> /&gt;</span><span class="comment">&lt;!-- 调度工厂实例化后，经过0秒开始执行调度 --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"repeatInterval"</span> <span class="attr">value</span>=<span class="string">"2000"</span> /&gt;</span><span class="comment">&lt;!-- 每2秒调度一次 --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>CronTriggerBean</li>
</ul>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"cronTrigger"</span> <span class="built_in">class</span>=<span class="string">"org.springframework.scheduling.quartz.CronTriggerBean"</span>&gt;  </span><br><span class="line">&lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"jobDetail"</span> <span class="keyword">ref</span>=<span class="string">"job1"</span> /&gt;  </span><br><span class="line">&lt;!—每天<span class="number">12</span>:<span class="number">00</span>运行一次 <span class="comment">--&gt;  </span></span><br><span class="line">&lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"cronExpression"</span> value=<span class="string">"0 0 12 * * ?"</span> /&gt;  </span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<h5 id="配置调度工厂（四）"><a href="#配置调度工厂（四）" class="headerlink" title="配置调度工厂（四）"></a>配置调度工厂（四）</h5><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="built_in">class</span>=<span class="string">"org.springframework.scheduling.quartz.SchedulerFactoryBean"</span>&gt;  </span><br><span class="line">&lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"triggers"</span>&gt;  </span><br><span class="line">&lt;<span class="built_in">list</span>&gt;  </span><br><span class="line">&lt;<span class="keyword">ref</span> bean=<span class="string">"cronTrigger"</span> /&gt;  </span><br><span class="line">&lt;/<span class="built_in">list</span>&gt;  </span><br><span class="line">&lt;/<span class="keyword">property</span>&gt;  </span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<h4 id="无需继承的作业类"><a href="#无需继承的作业类" class="headerlink" title="无需继承的作业类"></a>无需继承的作业类</h4><h5 id="作业类（一）"><a href="#作业类（一）" class="headerlink" title="作业类（一）"></a>作业类（一）</h5><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TradeStatusQueryTask</span>&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tradeQuery</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"交易状态查询进程"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="作业类的配置（二）"><a href="#作业类的配置（二）" class="headerlink" title="作业类的配置（二）"></a>作业类的配置（二）</h5><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"tradeStatusScheduling"</span> <span class="built_in">class</span>=<span class="string">"com.mjy.task.TradeStatusQueryTask"</span> /&gt; </span><br><span class="line"> &lt;bean <span class="built_in">id</span>=<span class="string">"myJobDetail"</span></span><br><span class="line">    <span class="built_in">class</span>=<span class="string">"org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"targetObject"</span>&gt;</span><br><span class="line">   &lt;<span class="keyword">ref</span> bean=<span class="string">"tradeStatusQueryTask"</span> /&gt;</span><br><span class="line">  &lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"targetMethod"</span>&gt;</span><br><span class="line">   &lt;value&gt;ExecCheckStatusTask&lt;/value&gt;</span><br><span class="line">  &lt;/<span class="keyword">property</span>&gt;</span><br><span class="line"> &lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>注册Bean：MethodInvokingJobDetailFactoryBean，有两个关键属性：targetObject指定任务类，targetMethod指定运行的方法。</li>
</ul>
<h5 id="作业类的配置（三）"><a href="#作业类的配置（三）" class="headerlink" title="作业类的配置（三）"></a>作业类的配置（三）</h5><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"myJobTrigger"</span></span><br><span class="line">   <span class="built_in">class</span>=<span class="string">"org.springframework.scheduling.quartz.CronTriggerFactoryBean"</span>&gt;</span><br><span class="line"> &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"jobDetail"</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">ref</span> bean=<span class="string">"myJobDetail"</span> /&gt;</span><br><span class="line"> &lt;/<span class="keyword">property</span>&gt;</span><br><span class="line"> &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"cronExpression"</span>&gt;</span><br><span class="line">  &lt;value&gt;<span class="number">0</span> <span class="number">0</span>/<span class="number">2</span> * * * ?&lt;/value&gt;</span><br><span class="line"> &lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>ref参数指定的就是之前配置的作业类的MethodInvokingJobDetailFactoryBean——beanName</li>
<li>Quartz的作业触发器有两种，分别是<br>org.springframework.scheduling.quartz.SimpleTriggerBean<br>org.springframework.scheduling.quartz.CronTriggerBean，两种触发器都可以使用，这里用的是CronTriggerBean。<h5 id="调度工厂的配置（四）"><a href="#调度工厂的配置（四）" class="headerlink" title="调度工厂的配置（四）"></a>调度工厂的配置（四）</h5></li>
</ul>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="built_in">name</span>=<span class="string">"startQuertz"</span></span><br><span class="line">   <span class="built_in">class</span>=<span class="string">"org.springframework.scheduling.quartz.SchedulerFactoryBean"</span>&gt;</span><br><span class="line"> &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"triggers"</span>&gt;</span><br><span class="line">  &lt;<span class="built_in">list</span>&gt;</span><br><span class="line">   &lt;<span class="keyword">ref</span> bean=<span class="string">"myJobTrigger"</span> /&gt;</span><br><span class="line">  &lt;/<span class="built_in">list</span>&gt;</span><br><span class="line"> &lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>ref参数指定的就是之前配置的触发器的beanName</li>
</ul>
<h5 id="启动Spring的容器（五）"><a href="#启动Spring的容器（五）" class="headerlink" title="启动Spring的容器（五）"></a>启动Spring的容器（五）</h5><h3 id="SpringTask"><a href="#SpringTask" class="headerlink" title="SpringTask"></a>SpringTask</h3><ul>
<li>xml配置方式</li>
<li>注解配置方式</li>
<li>命名空间的添加<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">xmlns:</span>task=<span class="string">"http://www.springframework.org/schema/task"</span>   </span><br><span class="line"><span class="symbol">xsi:</span>schemaLocation=<span class="string">"http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="xml配置方式"><a href="#xml配置方式" class="headerlink" title="xml配置方式"></a>xml配置方式</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">task</span>:scheduled-tasks&gt;   </span><br><span class="line">&lt;<span class="keyword">task</span>:scheduled <span class="keyword">ref</span>=<span class="string">"taskJob"</span> method=<span class="string">"job1"</span> cron=<span class="string">"0 * * * * ?"</span>/&gt;   </span><br><span class="line">&lt;/<span class="keyword">task</span>:scheduled-tasks&gt;</span><br><span class="line">&lt;<span class="keyword">context</span>:component-scan base-<span class="keyword">package</span>=<span class="string">" com.gy.mytask "</span> /&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>ref参数指定的即作业类，method指定的即需要运行的方法，cron及cronExpression表达式.</li>
</ul>
<h4 id="注解配置方式"><a href="#注解配置方式" class="headerlink" title="注解配置方式"></a>注解配置方式</h4><h5 id="配置注解扫描"><a href="#配置注解扫描" class="headerlink" title="配置注解扫描"></a>配置注解扫描</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:component-scan <span class="attribute">base-package</span>=<span class="string">" com.mjy.task "</span> /&gt;</span><br><span class="line">&lt;!—开启这个配置，spring才能识别@Scheduled注解   --&gt;  </span><br><span class="line">    &lt;task:annotation-driven <span class="attribute">scheduler</span>=<span class="string">"qbScheduler"</span> <span class="attribute">mode</span>=<span class="string">"proxy"</span>/&gt;  </span><br><span class="line">    &lt;task:scheduler <span class="attribute">id</span>=<span class="string">"qbScheduler"</span> <span class="attribute">pool-size</span>=<span class="string">"10"</span>/&gt;</span><br></pre></td></tr></table></figure>
<h5 id="注解的方式（Scheduled）"><a href="#注解的方式（Scheduled）" class="headerlink" title="注解的方式（Scheduled）"></a>注解的方式（Scheduled）</h5><ul>
<li>cron：cron表达式</li>
<li>fixedDelay：表示从上一个任务完成到下一个任务开始的间隔, 单位是毫秒</li>
<li>fixed-rate：表示从上一个任务开始到下一个任务开始的间隔, 单位是毫秒（如果某次任务开始时上次任务还没有结束，那么在上次任务执行完成时，当前任务会立即执行）</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Target</span>(&#123;java.lang.annotation.ElementType.METHOD, java.lang.annotation.ElementType.ANNOTATION_TYPE&#125;) </span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME) </span><br><span class="line"><span class="variable">@Documented</span> </span><br><span class="line">public <span class="variable">@interface</span> Scheduled </span><br><span class="line">&#123; </span><br><span class="line">  <span class="selector-tag">public</span> <span class="selector-tag">abstract</span> <span class="selector-tag">String</span> <span class="selector-tag">cron</span>(); </span><br><span class="line">   </span><br><span class="line">  <span class="selector-tag">public</span> <span class="selector-tag">abstract</span> <span class="selector-tag">long</span> <span class="selector-tag">fixedDelay</span>(); </span><br><span class="line">   </span><br><span class="line">  <span class="selector-tag">public</span> <span class="selector-tag">abstract</span> <span class="selector-tag">long</span> <span class="selector-tag">fixedRate</span>(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Cron表达式"><a href="#Cron表达式" class="headerlink" title="Cron表达式"></a>Cron表达式</h3><h4 id="Cron表达式的格式：秒-分-时-日-月-周-年-可选"><a href="#Cron表达式的格式：秒-分-时-日-月-周-年-可选" class="headerlink" title="Cron表达式的格式：秒 分 时 日 月 周 年(可选)"></a>Cron表达式的格式：秒 分 时 日 月 周 年(可选)</h4><table>
<thead>
<tr>
<th>字段名</th>
<th>允许的值</th>
<th>允许的特殊字符</th>
</tr>
</thead>
<tbody>
<tr>
<td>秒</td>
<td>0-59</td>
<td>, - * /</td>
</tr>
<tr>
<td>分</td>
<td>0-59</td>
<td>, - * /</td>
</tr>
<tr>
<td>小时</td>
<td>0-23</td>
<td>, - * /  </td>
</tr>
<tr>
<td>日</td>
<td>1-31</td>
<td>, - * ? / L W C</td>
</tr>
<tr>
<td>月</td>
<td>1-12 or JAN-DEC</td>
<td>, - * /  </td>
</tr>
<tr>
<td>周几</td>
<td>1-7 or SUN-SAT</td>
<td>, - * ? / L C #</td>
</tr>
<tr>
<td>年 (可选字段)</td>
<td>empty, 1970-2099</td>
<td>, - * /</td>
</tr>
</tbody>
</table>
<h4 id="Cron表达式符号解释"><a href="#Cron表达式符号解释" class="headerlink" title="Cron表达式符号解释"></a>Cron表达式符号解释</h4><ul>
<li>“?”字符：表示不确定的值</li>
<li>“,”字符：指定数个值</li>
<li>“-”字符：指定一个值的范围</li>
<li>“/”字符：指定一个值的增加幅度。n/m表示从n开始，每次增加m</li>
<li>“L”字符：用在日表示一个月中的最后一天，用在周表示该月最后一个星期X</li>
<li>“W”字符：指定离给定日期最近的工作日(周一到周五)</li>
<li>“#”字符：表示该月第几个周X。6#3表示该月第3个周五</li>
</ul>
<h4 id="Cron表达式范例"><a href="#Cron表达式范例" class="headerlink" title="Cron表达式范例"></a>Cron表达式范例</h4><ul>
<li>每隔5秒执行一次：<em>/5 </em> <em> </em> * ?</li>
<li>每隔1分钟执行一次：0 <em>/1 </em> <em> </em> ?</li>
<li>每天23点执行一次：0 0 23 <em> </em> ?</li>
<li>每天凌晨1点执行一次：0 0 1 <em> </em> ?</li>
<li>每月1号凌晨1点执行一次：0 0 1 1 * ?</li>
<li>每月最后一天23点执行一次：0 0 23 L * ?</li>
<li>每周星期天凌晨1点实行一次：0 0 1 ? * L</li>
<li>在26分、29分、33分执行一次：0 26,29,33 <em> </em> * ?</li>
<li>每天的0点、13点、18点、21点都执行一次：0 0 0,13,18,21 <em> </em> ?</li>
<li>“0 0 12 <em> </em> ?” 每天中午12点触发</li>
<li>“0 15 10 ? <em> </em>“ 每天上午10:15触发</li>
<li>“0 15 10 <em> </em> ?” 每天上午10:15触发</li>
<li>“0 15 10 <em> </em> ? *” 每天上午10:15触发</li>
<li>“0 15 10 <em> </em> ? 2005” 2005年的每天上午10:15触发</li>
<li>“0 <em> 14 </em> * ?” 在每天下午2点到下午2:59期间的每1分钟触发</li>
<li>“0 0/5 14 <em> </em> ?” 在每天下午2点到下午2:55期间的每5分钟触发</li>
<li>“0 0/5 14,18 <em> </em> ?” 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发</li>
<li>“0 0-5 14 <em> </em> ?” 在每天下午2点到下午2:05期间的每1分钟触发</li>
<li>“0 10,44 14 ? 3 WED” 每年三月的星期三的下午2:10和2:44触发</li>
<li>“0 15 10 ? * MON-FRI” 周一至周五的上午10:15触发</li>
<li>“0 15 10 15 * ?” 每月15日上午10:15触发</li>
<li>“0 15 10 L * ?” 每月最后一日的上午10:15触发</li>
<li>“0 15 10 ? * 6L” 每月的最后一个星期五上午10:15触发</li>
<li>“0 15 10 ? * 6L 2002-2005” 2002年至2005年的每月的最后一个星期五上午10:15触发</li>
<li>“0 15 10 ? * 6#3” 每月的第三个星期五上午10:15触发</li>
<li>0 6 <em> </em> * 每天早上6点</li>
<li>0 <em>/2 </em> <em> </em> 每两个小时</li>
<li>0 23-7/2，8 <em> </em> * 晚上11点到早上8点之间每两个小时，早上八点</li>
<li>0 11 4 * 1-3 每个月的4号和每个礼拜的礼拜一到礼拜三的早上11点</li>
<li>0 4 1 1 * 1月1日早上4点</li>
</ul>
</div></article><article><header><h2><a href="/2017/04/07/Map浅复制及深复制思考/">Map浅复制及深复制思考</a></h2></header><div class="article-meta clearfix"><time class="left">2017-04-07</time><ul class="tags left"><li><a href="/categories/java/">Java</a></li></ul><ul class="tags right"><li><a href="/tags/java/">Java</a></li></ul></div><div class="markdown-body"><p>文章主要介绍关于深复制和浅复制的原理和不同，然后引出Map浅复制和深复制的用法。</p>
<h4 id="浅复制与深复制概念"><a href="#浅复制与深复制概念" class="headerlink" title="浅复制与深复制概念"></a>浅复制与深复制概念</h4><ul>
<li>浅复制： 浅层复制仅仅复制所考虑的对象，而不复制它所引用的对象。</li>
<li>深复制：深层复制要复制的对象引用的对象都复制一遍。</li>
</ul>
<h4 id="通用点"><a href="#通用点" class="headerlink" title="通用点"></a>通用点</h4><p>实现Cloneable接口，实现clone方法</p>
<h4 id="浅复制"><a href="#浅复制" class="headerlink" title="浅复制"></a>浅复制</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Object o = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        o = <span class="keyword">super</span>.clone();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="深复制"><a href="#深复制" class="headerlink" title="深复制"></a>深复制</h4><h5 id="实现接口Cloneable-Serializable"><a href="#实现接口Cloneable-Serializable" class="headerlink" title="实现接口Cloneable,Serializable"></a>实现接口Cloneable,Serializable</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">deepClone</span><span class="params">()</span><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">    ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(baos);</span><br><span class="line">    oos.writeObject(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//从流里读出来</span></span><br><span class="line">    ByteArrayInputStream bais = <span class="keyword">new</span> ByteArrayInputStream(baos.toByteArray());</span><br><span class="line">    ObjectInputStream oi=<span class="keyword">new</span> ObjectInputStream(bais);</span><br><span class="line">    <span class="keyword">return</span>(oi.readObject());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="浅复制与深复制区别"><a href="#浅复制与深复制区别" class="headerlink" title="浅复制与深复制区别"></a>浅复制与深复制区别</h4><p>浅复制不能复制对象包含的引用对象，深复制则是所有的对象都会进行复制</p>
<h4 id="Map的引用"><a href="#Map的引用" class="headerlink" title="Map的引用"></a>Map的引用</h4><p>Map的引用改变其中一个将改变另一个Map的内容<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Map map=<span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line">Map map2=map;</span><br><span class="line">map2.put(<span class="string">"name"</span>,<span class="string">"mjy"</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="Map的浅复制"><a href="#Map的浅复制" class="headerlink" title="Map的浅复制"></a>Map的浅复制</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map map=<span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line">Map map2=<span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line">map2.putAll(map);</span><br><span class="line">map2.put(<span class="string">"name"</span>,<span class="string">"mjy"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="Map的深复制"><a href="#Map的深复制" class="headerlink" title="Map的深复制"></a>Map的深复制</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Serializable&gt; <span class="function">T <span class="title">clone</span><span class="params">(T obj)</span></span>&#123;</span><br><span class="line">    T clonedObj = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">    ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(baos);</span><br><span class="line">    oos.writeObject(obj);</span><br><span class="line">    oos.close();</span><br><span class="line">    </span><br><span class="line">    ByteArrayInputStream bais = <span class="keyword">new</span> ByteArrayInputStream(baos.toByteArray());</span><br><span class="line">    ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(bais);</span><br><span class="line">    clonedObj = (T) ois.readObject();</span><br><span class="line">    ois.close();</span><br><span class="line">    </span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article><article><header><h2><a href="/2017/04/06/java有继承关系的初始化顺序/">java有继承关系的初始化顺序</a></h2></header><div class="article-meta clearfix"><time class="left">2017-04-06</time><ul class="tags left"><li><a href="/categories/java/">Java</a></li></ul><ul class="tags right"><li><a href="/tags/java/">Java</a></li></ul></div><div class="markdown-body"><p>由于Java 中的一切东西都是对象，所以许多活动 变得更加简单，这个问题便是其中的一例。正如下一章会讲到的那样，每个对象的代码都存在于独立的文件中。除非真的需要代码，否则那个文件是不会载入的。通常，我们可认为除非那个类的一个对象构造完毕，否则代码不会真的载入。由于static 方法存在一些细微的歧义，所以也能认为“类代码在首次使用的时候载入”。首次使用的地方也是static初始化发生的地方。装载的时候，所有static对象和static代码块都会按照本来的顺序初始化（亦即它们在类定义代码里写入的顺序）。当然，static 数据只会初始化一次。</p>
<h4 id="—《Thinking-in-Java-4》"><a href="#—《Thinking-in-Java-4》" class="headerlink" title="—《Thinking in Java 4》"></a>—《Thinking in Java 4》</h4><p>简要的说就是，在类有继承关系时，类加载器上溯造型，进行相关类的加载工作。</p>
<h4 id="初始化循序"><a href="#初始化循序" class="headerlink" title="初始化循序"></a>初始化循序</h4><p>含有继承的类的初始化顺序：父类的静态变量-&gt;父类的静态块-&gt;子类静态变量-&gt;子类静态初始化块-&gt;父类变量-&gt;父类初始化块-&gt;父类的构造函数-&gt;子类的变量-&gt;子类初始化块-&gt;子类构造函数;(变量和初始化块之间的先后顺序根据类中的先后位置而定)。</p>
<h4 id="Parent"><a href="#Parent" class="headerlink" title="Parent"></a>Parent</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> &#123;</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span> name =getName();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">String</span> <span class="built_in">width</span>=getWidth();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"父类-----"</span>+<span class="string">"静态代码块"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"父类-----"</span>+<span class="string">"非静态代码块"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Parent</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"父类-----"</span>+<span class="string">"构造方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span> <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"父类-----"</span>+<span class="string">"静态成员变量"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"mjy"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">String</span> <span class="title">getWidth</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"父类-----"</span>+<span class="string">"非静态成员变量"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"mjy"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Son"><a href="#Son" class="headerlink" title="Son"></a>Son</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="title">extends</span> <span class="title">Parent</span> &#123;</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span> age =getAge();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">String</span> <span class="built_in">height</span>=getHeight();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"子类-----"</span>+<span class="string">"静态代码块"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"子类-----"</span>+<span class="string">"非静态代码块"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Son</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"子类-----"</span>+<span class="string">"构造方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span> <span class="title">getAge</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"子类-----"</span>+<span class="string">"静态成员变量"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"12"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">String</span> <span class="title">getHeight</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"子类-----"</span>+<span class="string">"非静态成员变量"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"12"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Program"><a href="#Program" class="headerlink" title="Program"></a>Program</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Program</span> &#123;</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span> </span>&#123;</span><br><span class="line">		Son son = <span class="keyword">new</span> Son();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Console"><a href="#Console" class="headerlink" title="Console"></a>Console</h4><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">父类<span class="comment">-----静态成员变量</span></span><br><span class="line">父类<span class="comment">-----静态代码块</span></span><br><span class="line">子类<span class="comment">-----静态成员变量</span></span><br><span class="line">子类<span class="comment">-----静态代码块</span></span><br><span class="line">父类<span class="comment">-----非静态成员变量</span></span><br><span class="line">父类<span class="comment">-----非静态代码块</span></span><br><span class="line">父类<span class="comment">-----构造方法</span></span><br><span class="line">子类<span class="comment">-----非静态成员变量</span></span><br><span class="line">子类<span class="comment">-----非静态代码块</span></span><br><span class="line">子类<span class="comment">-----构造方法</span></span><br></pre></td></tr></table></figure>
</div></article><article><header><h2><a href="/2017/04/06/hexo-simpleblock解决首页无法显示摘要的问题/">hexo simpleblock解决首页无法显示摘要的问题</a></h2></header><div class="article-meta clearfix"><time class="left">2017-04-06</time><ul class="tags left"><li><a href="/categories/hexo/">Hexo</a></li></ul><ul class="tags right"><li><a href="/tags/hexo/">Hexo</a></li><li><a href="/tags/simpleblock/">Simpleblock</a></li></ul></div><div class="markdown-body"><p>博主在使用simpleblock的时候，发现首页和其他的一些地方显示的文章分页中，文章都是全部显示的，这样很影响首页的展示效果，并且不便于读者浏览博客的所有文章，因此我需要写一个摘要来解决这些问题。</p>
<p>摘要的原理则是利用标签内部的文字做为摘要，把生成后的这些截取下来作为整个文章的摘要显示。</p>
<h4 id="主题方案和想法"><a href="#主题方案和想法" class="headerlink" title="主题方案和想法"></a>主题方案和想法</h4><p>博主用的是simpleblock的主题方案，尽管还不完善，但是却是我喜欢的，不完善的可以自己去完善，这样才能达到自己想要的目的。</p>
<h4 id="helper-js"><a href="#helper-js" class="headerlink" title="helper.js"></a>helper.js</h4><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">hexo.extend.helper.register(<span class="string">'page_excerpt'</span>, <span class="function"><span class="keyword">function</span><span class="params">(post)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> p = post ? post : <span class="keyword">this</span>.page;</span><br><span class="line">  <span class="keyword">var</span> excerpt = p.excerpt;</span><br><span class="line">  <span class="keyword">if</span> (!excerpt) &#123;</span><br><span class="line">    <span class="keyword">var</span> pos = p.content.indexOf(<span class="string">'&lt;/p&gt;'</span>);</span><br><span class="line">    <span class="keyword">if</span> (pos &gt; <span class="number">0</span>)&#123;</span><br><span class="line">      excerpt = p.content.substring(<span class="number">0</span>, pos + <span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> excerpt;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="index-jade"><a href="#index-jade" class="headerlink" title="index.jade"></a>index.jade</h4><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> is_home()</span><br><span class="line">  .markdown-<span class="keyword">body</span>!= page_excerpt(post)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> is_archive()</span><br><span class="line">  .markdown-<span class="keyword">body</span>!= page_excerpt(post)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> is_year()</span><br><span class="line">  .markdown-<span class="keyword">body</span>!= page_excerpt(post)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> is_month()</span><br><span class="line">  .markdown-<span class="keyword">body</span>!= page_excerpt(post)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> is_category()</span><br><span class="line">  .markdown-<span class="keyword">body</span>!= page_excerpt(post)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> is_tag()</span><br><span class="line">  .markdown-<span class="keyword">body</span>!= page_excerpt(post)</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">  .markdown-<span class="keyword">body</span>!= post.content</span><br></pre></td></tr></table></figure>
<h4 id="赘述"><a href="#赘述" class="headerlink" title="赘述"></a>赘述</h4><p>注册hexo摘要获取方法，首页显示的时候取第一个p标签的内容做为摘要</p>
<h4 id="自定义hexo主题"><a href="#自定义hexo主题" class="headerlink" title="自定义hexo主题"></a>自定义hexo主题</h4><p>如果对自定义hexo主题有兴趣的话，参考博客–<a href="http://blog.csdn.net/melordljm/article/details/51985129" target="_blank" rel="noopener">Hexo高级教程之主题开发</a>!</p>
</div></article><article><header><h2><a href="/2017/04/01/设计模式概述/">设计模式概述</a></h2></header><div class="article-meta clearfix"><time class="left">2017-04-01</time><ul class="tags left"><li><a href="/categories/design/">设计模式</a></li></ul><ul class="tags right"><li><a href="/tags/design/">设计模式</a></li></ul></div><div class="markdown-body"><p>设计模式（Designpattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。毫无疑问，设计模式于己于他人于系统都是多赢的，设计模式使代码编制真正工程化，设计模式是软件工程的基石，如同大厦的一块块砖石一样。项目中合理的运用设计模式可以完美的解决很多问题，每种模式在现在中都有相应的原理来与之对应，每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案，这也是它能被广泛应用的原因</p>
<h3 id="—-—可复用面向对象软件的基础"><a href="#—-—可复用面向对象软件的基础" class="headerlink" title="— —可复用面向对象软件的基础"></a>— —可复用面向对象软件的基础</h3><h4 id="总体来说设计模式分为三大类："><a href="#总体来说设计模式分为三大类：" class="headerlink" title="总体来说设计模式分为三大类："></a>总体来说设计模式分为三大类：</h4><h5 id="创建型模式，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。"><a href="#创建型模式，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。" class="headerlink" title="创建型模式，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。"></a>创建型模式，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。</h5><h5 id="结构型模式，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。"><a href="#结构型模式，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。" class="headerlink" title="结构型模式，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。"></a>结构型模式，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。</h5><h5 id="行为型模式，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。"><a href="#行为型模式，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。" class="headerlink" title="行为型模式，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。"></a>行为型模式，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。</h5><h5 id="其实还有两类：并发型模式和线程池模式。"><a href="#其实还有两类：并发型模式和线程池模式。" class="headerlink" title="其实还有两类：并发型模式和线程池模式。"></a>其实还有两类：并发型模式和线程池模式。</h5><h4 id="设计模式的六大原则"><a href="#设计模式的六大原则" class="headerlink" title="设计模式的六大原则"></a>设计模式的六大原则</h4><h5 id="1、开闭原则（Open-Close-Principle）"><a href="#1、开闭原则（Open-Close-Principle）" class="headerlink" title="1、开闭原则（Open Close Principle）"></a>1、开闭原则（Open Close Principle）</h5><p>开闭原则就是说对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。</p>
<h5 id="2、里氏代换原则（Liskov-Substitution-Principle）"><a href="#2、里氏代换原则（Liskov-Substitution-Principle）" class="headerlink" title="2、里氏代换原则（Liskov Substitution Principle）"></a>2、里氏代换原则（Liskov Substitution Principle）</h5><p>里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。—— From Baidu 百科</p>
<h5 id="3、依赖倒转原则（Dependence-Inversion-Principle）"><a href="#3、依赖倒转原则（Dependence-Inversion-Principle）" class="headerlink" title="3、依赖倒转原则（Dependence Inversion Principle）"></a>3、依赖倒转原则（Dependence Inversion Principle）</h5><p>这个是开闭原则的基础，具体内容：真对接口编程，依赖于抽象而不依赖于具体。</p>
<h5 id="4、接口隔离原则（Interface-Segregation-Principle）"><a href="#4、接口隔离原则（Interface-Segregation-Principle）" class="headerlink" title="4、接口隔离原则（Interface Segregation Principle）"></a>4、接口隔离原则（Interface Segregation Principle）</h5><p>这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。还是一个降低类之间的耦合度的意思，从这儿我们看出，其实设计模式就是一个软件的设计思想，从大型软件架构出发，为了升级和维护方便。所以上文中多次出现：降低依赖，降低耦合。</p>
<h5 id="5、迪米特法则（最少知道原则）（Demeter-Principle）"><a href="#5、迪米特法则（最少知道原则）（Demeter-Principle）" class="headerlink" title="5、迪米特法则（最少知道原则）（Demeter Principle）"></a>5、迪米特法则（最少知道原则）（Demeter Principle）</h5><p>为什么叫最少知道原则，就是说：一个实体应当尽量少的与其他实体之间发生相互作用，使得系统功能模块相对独立。</p>
<h5 id="6、合成复用原则（Composite-Reuse-Principle）"><a href="#6、合成复用原则（Composite-Reuse-Principle）" class="headerlink" title="6、合成复用原则（Composite Reuse Principle）"></a>6、合成复用原则（Composite Reuse Principle）</h5><p>原则是尽量使用合成/聚合的方式，而不是使用继承。</p>
</div></article><div class="archive-pagination"><div class="paginator"><a class="extend prev" rel="prev" href="/page/4/">&laquo;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/">&raquo;</a></div></div></div><div class="block-sidebar column one-fourth"><div class="widget text-content"><p>Agreek，河南人，技术宅，生于1993,12,23。</p>
<ul>
<li>毕业于<a href="http://www.zzuli.edu.cn/">郑州轻工业学院</a></li>
<li>一个努力前进的<a href="https://github.com/978420544/Demo">菜鸟</a></li>
<li>在 <a href="https://github.com/978420544">Github</a> 上积极参与开源社区</li>
</ul>
</div><div class="widget categories"><h3>分类</h3><hr><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/bug/">Bug笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/gradle/">Gradle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">MYSQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mybatis/">Mybatis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/quartz/">QUARTZ</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">Spring</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/sum/">Sum</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/life/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/design/">设计模式</a></li></ul></div><div class="widget tags"><h3>标签</h3><hr><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/bug/">Bug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ftp/">FTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">Gradle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">Mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proxy/">Proxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/quartz/">QUARTZ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/simpleblock/">Simpleblock</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sum/">Sum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">Xml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transaction/">事物与锁</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reflect/">反射</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread/">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/work/">职场</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/soul/">鸡汤</a></li></ul></div><div class="widget archives"><h3>归档</h3><hr><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li></ul></div><div class="widget text-content"><p>该博客使用基于 &nbsp;<a href="http://hexo.io">Hexo</a>&nbsp; 的 &nbsp;<a href="https://github.com/jysperm/hexo-theme-simpleblock">simpleblock</a>&nbsp; 主题。博客内容使用 &nbsp;<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn">CC BY-NC-SA 3.0</a>&nbsp; 授权发布。最后生成于 2022-05-12.</p></div></div></div></div><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><!--script.--><!--  const gitment = new Gitment({--><!--    id: document.location.href, // 可选。默认为 location.href--><!--    owner: '978420544',--><!--    repo: '978420544.github.io',--><!--    oauth: {--><!--      client_id: '446d9e1fab16c6a25a57',--><!--      client_secret: '9f0a1456f7c5cf1049b6bdce03a3b4ffd2c6ebfa',--><!--    },--><!--  })--><!--  gitment.render('container')--><!--script.--><!--  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {--><!--     window.Promise = null;--><!--  }--></body></html>